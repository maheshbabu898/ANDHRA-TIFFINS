<!DOCTYPE html>
<html>
<head>
  <title>Login â€“ Andhra Tiffens</title>
</head>
<body>
<h3>Login with Mobile Number</h3>

<input id="mobile" placeholder="Mobile Number" maxlength="10">
<button onclick="sendOtp()">Send OTP</button>

<div id="otpBox" style="display:none">
  <input id="otp" placeholder="Enter OTP">
  <button onclick="verifyOtp()">Verify OTP</button>
</div>

<script>
function sendOtp() {
  fetch('/send-otp', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ mobile: mobile.value })
  }).then(()=> otpBox.style.display='block');
}

function verifyOtp() {
  fetch('/verify-otp', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ mobile: mobile.value, otp: otp.value })
  })
  .then(r=>r.json())
  .then(d=>{
    if(d.success) location.href='/cart.html';
    else alert('Invalid OTP');
  });
}
</script>
</body>
</html>
